trigger:
- main

pool:
  vmImage: ubuntu-latest

stages:
- stage: Staging
  displayName: Staging Environment
  steps:
  - task: AzureRmWebAppDeployment@4
    inputs:
      azureSubscription: 'my-subscription-id'
      appType: webApp
      appName: 'my-webapp-name'
      package: '$(System.DefaultWorkingDirectory)/**/drop/my-webapp.zip'
      deploymentMethod: manual
  - task: AzureRmWebAppStart@1
    inputs:
      azureSubscription: 'my-subscription-id'
      appName: 'my-webapp-name'
      startupType: Start
    condition: succeeded('AzureRmWebAppDeployment')

- stage: Dev
  displayName: Dev Environment
  dependsOn: Staging
